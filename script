document.addEventListener('DOMContentLoaded', () => {
    const form = document.getElementById('teamForm');
    form.addEventListener('submit', function(event) {
        event.preventDefault();
        const teamName = 'France'; // Forcing the team name to France for testing
        getMatchData(teamName);
    });

    function getMatchData(teamName) {
        const data = null;
        const xhr = new XMLHttpRequest();
        xhr.withCredentials = true;

        xhr.addEventListener('readystatechange', function () {
            if (this.readyState === this.DONE) {
                const response = JSON.parse(this.responseText);
                displayMatches(response.events);
            }
        });

        xhr.open('GET', `https://sportapi7.p.rapidapi.com/api/v1/event/xdbsZdb/h2h/events?team=${encodeURIComponent(teamName)}`);
        xhr.setRequestHeader('x-rapidapi-key', 'ec587e6c44mshfc215e1ad578e49p1bcd8ejsn20af305b24a7');
        xhr.setRequestHeader('x-rapidapi-host', 'sportapi7.p.rapidapi.com');

        xhr.send(data);
    }

    function displayMatches(matches) {
        const matchesDiv = document.getElementById('matches');
        matchesDiv.innerHTML = ''; // Clear previous results

        matches.forEach(match => {
            const matchElement = document.createElement('div');
            matchElement.classList.add('match');
            matchElement.innerHTML = `
                <p>${match.homeTeam} vs ${match.awayTeam}</p>
                <p>Date: ${new Date(match.date).toLocaleDateString()}</p>
                <p>Score: ${match.homeScore} - ${match.awayScore}</p>
            `;
            matchesDiv.appendChild(matchElement);
        });
    }

    // Trigger initial load with France matches
    getMatchData('France');
});
